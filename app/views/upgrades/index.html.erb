<% headers = ['', 'Upgrade ID', 'Device ID', 'Customer Name', 'Date Opened', 'Status', 'Assigned To'] %>

<%= tabs_start("upgradequeue")%>
<%= tabitem("upgradequeue", 0, "Open upgrade Queue", true) %>

<div class="Half">
	<%= line_chart [
		{name: Date.today.years_ago(2).year, data: Upgrade.group_by_day_of_week(:created_at, format: "%a", range: Date.today.years_ago(2).all_week).count},
		{name: Date.today.years_ago(1).year, data: Upgrade.group_by_day_of_week(:created_at, format: "%a", range: Date.today.years_ago(1).all_week).count},
		{name: Date.today.year, data: Upgrade.group_by_day_of_week(:created_at, format: "%a", range: Date.today.all_week).count},
		], discrete: true, height: "100px", library: {title: "# of upgrades Opened",
														backgroundColor: "#D2DEF4",
														axisTitlesPosition: 'none',
														chartArea: {left: 40, top: 10, width: '75%'}
														} %>
	<div class="List">
		<span class="Count"><%= @openupgrades.count %></span>
		<span class="Tablename">Open upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @openupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="Half">
	<div class="List">
		<span class="Count"><%= @builtupgrades.count %></span>
		<span class="Tablename">Built upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @builtupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<%= tabitem_end %>
<%= tabitem("upgradequeue",  1, "Shipping upgrade Queue") %>

<div class="Half">
	<div class="List">
		<span class="Count"><%= @verifiedupgrades.count %></span>
		<span class="Tablename">Verified upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @verifiedupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="Half">
	<div class="List">
		<span class="Count"><%= @shippedupgrades.count %></span>
		<span class="Tablename">Shipped upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @shippedupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<%= tabitem_end %>
<%= tabitem("upgradequeue",  2, "Finalize upgrade Queue") %>

<div class="Half">
	<div class="List">
		<span class="Count"><%= @returnedupgrades.count %></span>
		<span class="Tablename">Returned upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @returnedupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="Half">
	<div class="List">
		<span class="Count"><%= @completedupgrades.count %></span>
		<span class="Tablename">Completed upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @completedupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<%= tabitem_end %>
<%= tabitem("upgradequeue",  3, "My upgrade Queue") %>

<div class="Half">
	<div class="List">
		<span class="Count"><%= @usersupgrades.count %></span>
		<span class="Tablename">My Incomplete upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @usersupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<div class="Half">
	<div class="List">
		<span class="Count"><%= @userscompletedupgrades.count %></span>
		<span class="Tablename">My Completed upgrades</span>
		<div class="ListContents">
			<table class="ListTable">
				<thead>
					<tr>
						<% headers.each do |h| %>
						<th class="ListHeader"><%= link_to h, sort: h %></th>
						<% end %>
					</tr>
				</thead>
				<tbody>
					<%= render @userscompletedupgrades %>
				</tbody>
			</table>
		</div>
	</div>
</div>

<%= tabitem_end %>
<%= tabs_end %>